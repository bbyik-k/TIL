# TDD? BDD? 개념 정리 및 분석

## ✅ TDD(Test-Driven Development)란?

TDD는 **테스트 주도 개발 방법론**으로, **테스트 코드를 먼저 작성하고, 이후 코드가 테스트를 통과할 수 있도록 개발을 진행하는 방식**입니다.

### 🔹 **TDD의 개발 사이클**

1. **테스트 작성**: 원하는 기능에 대한 테스트를 먼저 작성
2. **테스트 실행**: 테스트를 실행하여 실패(Fail)하는지 확인
3. **코드 작성**: 테스트가 통과할 최소한의 코드 작성
4. **테스트 재실행**: 테스트가 통과하는지 확인
5. **리팩토링**: 중복 코드 제거 및 최적화
6. **반복**

### 🔹 **TDD의 장점**

- **테스트 가능한 코드 작성** → 코드의 품질과 유지보수성 향상
- **각 모듈의 역할이 단순하고 명확해짐** → 모듈 크기 감소, 커플링 감소
- **프로젝트의 유지보수 및 확장성 용이**
- **자동화된 테스트를 통해 수동 테스트 시간을 절감**
- **반복 테스트를 통해 실수로 인해 놓칠 수 있는 부분을 줄일 수 있음**
- **실제 사용자의 환경과 유사한 상황에서 테스트가 가능** → 실서비스에서 발생할 오류를 사전에 발견 가능

### 🔹 **그럼에도 불구하고.. TDD를 하지 않는 이유**

- **테스트 작성에 대한 비용 부담** (초기 개발 속도 저하)
- **테스트 코드 작성이 귀찮음 🥹**
- **일정 지연 압박으로 인해 생략**
- **기획이 완전히 정리되지 않은 상태에서 코드 개발이 진행됨** → 테스트 코드 작성이 어렵거나 변경이 잦음
- **결국, 테스트의 필요성보다 비용이 더 크다고 판단되는 경우 발생**

이러한 문제로 인해 **TDD를 하지 않으면 기술 부채(Technical Debt)가 증가할 가능성이 높아짐**.

---

## ✅ BDD(Behavior-Driven Development)란?

BDD는 **TDD에서 파생된 개발 방법론으로, 개발자와 비개발자(기획자, QA, PM) 간의 협업을 원활하게 하기 위해 만들어진 방식**입니다.  
BDD에서는 **사용자의 행동(Behavior)** 을 기반으로 테스트를 작성합니다.

### 🔹 **BDD의 개발 사이클**

1. **사용자의 행위를 시나리오 형태로 정의**
2. **해당 시나리오에 대한 테스트 코드 작성**
3. **테스트가 통과하도록 코드 작성**
4. **반복적으로 실행 및 리팩토링**

### 🔹 **BDD에서 사용하는 구조 (Given-When-Then 패턴)**

BDD에서는 **Given-When-Then** 패턴을 사용하여 테스트를 작성합니다.

| 단계      | 설명                                                |
| --------- | --------------------------------------------------- |
| **Given** | 특정한 상태 또는 조건을 정의 (예: 로그인한 사용자)  |
| **When**  | 사용자가 특정 행위를 수행 (예: 상품 등록 버튼 클릭) |
| **Then**  | 기대하는 결과를 확인 (예: 상품이 정상적으로 등록됨) |

#### 📌 **예제: 상품 등록 기능**

```gherkin
Feature: 상품 등록
  Scenario: 관리자가 상품을 등록할 때
    Given 관리자가 로그인한 상태에서
    When 상품 정보를 입력하고 상품 등록 버튼을 누르면
    Then 상품이 정상적으로 등록되고, 등록 성공 메시지가 표시된다.
```

### 🔹 **BDD의 장점**

- **사용자의 시나리오를 기준으로 테스트를 작성하기 때문에, 기획과 개발 간의 갭을 줄일 수 있음**
- **시나리오 기반 테스트를 통해 예외 상황을 더 쉽게 발견 가능**
- **설계 과정에서 사용자 중심의 도메인 모델이 형성됨**
- **기획 단계에서부터 테스트를 포함하기 때문에, 개발 과정에서 발견되지 않은 요구사항의 누락을 줄일 수 있음**

---

## ✅ TDD와 BDD의 차이점

| 구분                 | TDD (테스트 주도 개발)                        | BDD (행위 주도 개발)                                                                |
| -------------------- | --------------------------------------------- | ----------------------------------------------------------------------------------- |
| **테스트 목적**      | 특정 모듈이나 함수가 올바르게 동작하는지 확인 | 사용자 관점에서 애플리케이션이 기대한 대로 동작하는지 검증                          |
| **초점**             | 기능(Functionality) 검증                      | 사용자 행동(Behavior) 검증                                                          |
| **테스트 방식**      | 함수, 클래스 등의 단위 테스트 중심            | 시나리오 중심의 테스트                                                              |
| **사용 예시**        | `expect(add(1,1)).toBe(2);`                   | `expect(calculator.display).toBe('2');`                                             |
| **테스트 작성 순서** | 개발자가 필요한 테스트를 먼저 작성하고 구현   | 기획서(User Story)를 기반으로 테스트 작성                                           |
| **기대 결과**        | 특정 기능이 정확히 작동하는지 확인            | 사용자 경험이 예상한 대로 이루어지는지 확인                                         |
| **문서화**           | 코드 기반 테스트                              | 자연어 기반 테스트 ([Gherkin](Gherkin-BDD.md#gherkin이란-bdd에서의-역할과-활용) 등) |

### ✅ **TDD와 BDD의 관계**

- **BDD는 TDD에서 발전한 개념**이며, 사용자의 행위를 기반으로 테스트를 작성하는 방식
- **BDD 내에서 세부 기능을 구현할 때, 각 기능은 TDD 방식으로 검증 가능**
- **즉, BDD가 전체적인 시나리오를 다루고, TDD가 개별 기능을 세부적으로 테스트하는 역할**

```text
큰 BDD 사이클 내에서 여러 개의 TDD 사이클이 돌아감.
```

---

## ✅ 참고 자료: 카카오 If TDD/BDD 접근 방식

- **카카오에서는 `Kotest` (코틀린) 와 같은 테스트 프레임워크를 활용하여 TDD 및 BDD를 적용**
- **BDD가 필요할 때는 TDD 기반으로 모듈을 개발한 후, 전체적인 시나리오를 BDD 방식으로 검증**
- **["Kotest가 있다면 TDD 묻고 BDD로 가!"](https://tv.kakao.com/channel/3693125/cliplink/414004682)** (카카오 If 영상 발췌)

---

## 🎯 결론

### ✅ TDD & BDD의 핵심 요약

- **TDD는 작은 기능 단위의 코드 품질을 보장하고, 유지보수를 쉽게 만들어줌**
- **BDD는 사용자 중심의 시나리오 기반으로 설계하여, 기획과 개발 간의 협업을 강화**
- **두 개념은 상호 보완적이며, 함께 사용하면 높은 품질의 소프트웨어를 만들 수 있음**

👉 **실무에서는 작은 단위의 코드 테스트는 TDD로 진행하고, 서비스 전체적인 흐름은 BDD로 테스트하는 것이 이상적**

✅ **TDD와 BDD를 적절히 활용하면, 유지보수성 높은 프로젝트를 만들고, 예상치 못한 버그를 최소화할 수 있다!** 🚀
