# TIL: Next.js 12 vs 13 차이 정리 및 커뮤니티 토론 해설

## ✅ 개요

Next.js는 13버전에서 큰 변화가 있었으며, 이는 단순한 업데이트 수준을 넘어 **아키텍처 수준의 패러다임 전환**으로 볼 수 있습니다.  
이번 TIL에서는 Next.js 12(Page Router)와 13(App Router)의 주요 차이점, 그리고 실제 커뮤니티에서 오간 토론을 기반으로  
많은 개발자들이 헷갈려하는 포인트를 정리하고 해설합니다.

---

## 🚀 Next.js 12 vs 13 주요 차이점 요약

| 항목         | Next.js 12 (Page Router)               | Next.js 13 (App Router)                        |
| ------------ | -------------------------------------- | ---------------------------------------------- |
| 라우팅 구조  | `pages/` 디렉토리 기반                 | `app/` 디렉토리 기반                           |
| 렌더링 전략  | 페이지 단위 선택 (SSG/SSR/ISR/CSR)     | 컴포넌트 단위 선택 (서버/클라이언트 혼합 가능) |
| 데이터 패칭  | `getStaticProps`, `getServerSideProps` | 서버 컴포넌트에서 직접 `fetch()`               |
| 기본 렌더링  | 클라이언트 컴포넌트                    | 서버 컴포넌트 (default)                        |
| 하이드레이션 | 전체 페이지 대상                       | `use client` 선언된 컴포넌트만 대상            |
| 메타 설정    | `next/head`로 수동 설정                | `generateMetadata()`로 동적 설정               |
| 혼합 렌더링  | 불가능 (단일 전략 고정)                | 가능 (서버 + 클라이언트 혼재 가능)             |

---

## 💬 커뮤니티 토론 주요 질문 및 해설

### ❓ Q1. v12에서도 SSR과 CSR을 섞어서 사용 가능한 거 아닌가요?

**🧠 해설:**

- v12에서도 `useEffect`로 fetch를 하면 CSR처럼 동작할 수 있지만, **서버 측 코드 실행은 오직 페이지 컴포넌트 내에서만 가능**합니다.
- v13은 **"서버 컴포넌트"라는 개념이 생겨**, 자식 컴포넌트 내에서도 서버 API 호출, DB 접근 등이 가능해졌습니다.

📌 즉, v13에서는 **서버/클라이언트 구분이 페이지 단위 → 컴포넌트 단위로 바뀐 것**이 핵심입니다.

---

### ❓ Q2. v13도 하이드레이션 하잖아요. 그럼 똑같은 거 아닌가요?

**🧠 해설:**

- 맞습니다. `use client` 컴포넌트는 여전히 hydrate 대상입니다.
- 그러나 v13의 서버 컴포넌트는 **hydrate 대상이 아니며, JS 번들에 포함되지도 않습니다.**
- 이는 **페이지의 초기 로딩 성능 향상과 번들 크기 감소**로 이어집니다.

---

### ❓ Q3. v12에서는 컴포넌트 단위로 렌더링 전략을 나눌 수 없었나요?

**🧠 해설:**

- v12는 **"페이지 단위"로 SSR/SSG 전략을 결정**하고, 그 하위 컴포넌트들은 전부 CSR 방식으로 동작합니다.
- v13은 **컴포넌트 자체가 서버에서 실행되기 때문에**, 서버 기능을 특정 부분에만 적용할 수 있습니다.
- 예: 서버 컴포넌트 내부에 클라이언트 컴포넌트를 포함시키는 하이브리드 구조

---

## 🔍 핵심 키워드 정리

- **Page Router (v12)**: 페이지 기반, 렌더링 전략은 전체 페이지 단위
- **App Router (v13)**: 폴더 기반 라우팅, 컴포넌트 단위 서버/클라이언트 분리 가능
- **React Server Components (RSC)**: 클라이언트가 아닌 서버에서만 실행되는 컴포넌트
- **Hydration**: 서버에서 그려진 HTML을 브라우저에서 React로 다시 연결
- **"use client"**: 클라이언트에서 실행되도록 명시한 컴포넌트
- **generateMetadata()**: 페이지 메타 정보를 동적으로 설정하는 함수 (v13)

---

## ✍️ 개인 인사이트

이번 학습을 통해 Next.js의 구조적 변화가 단순히 디렉토리만 바뀐 게 아니라,  
**렌더링 전략, 컴포넌트 책임, 코드 실행 위치까지 완전히 바뀌었다는 점**을 체감했습니다.

특히 App Router는:

- 설계 시점부터 렌더링 전략을 더 세밀하게 조절 가능하게 했고,
- 번들 사이즈 최적화와 퍼포먼스 개선을 자연스럽게 추구할 수 있게 도와준다는 점이 인상 깊었습니다.

---

## 🔗 참고 링크

- [Next.js 공식 문서](https://nextjs.org/docs)
- [React Server Components 논의](https://github.com/reactwg/server-components/discussions/4)
- [Next.js 13 App Router 소개](https://nextjs.org/docs/app/building-your-application/routing)

---
