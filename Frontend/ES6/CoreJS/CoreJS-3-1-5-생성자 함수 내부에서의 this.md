# [Core JS] 3-1-5. 생성자 함수 내부에서의 this

## 요약

- 생성자 함수에서의 this는 새로 생성될 인스턴스 자신을 가리킨다.
- 객체 생성 흐름과 this 바인딩을 이해해야 의도치 않은 전역 오염과 버그를 막을 수 있다.

## 핵심 내용

- 생성자 함수는 객체를 만들기 위한 함수이다.
- `new` 키워드 유무에 따라 this의 대상이 완전히 달라진다.
- this는 ***실행 시점에 생성되는 인스턴스***에 바인딩된다.

### 핵심내용 1

- 생성자 함수는 공통된 구조를 가진 객체(인스턴스)를 만들기 위한 함수이며, `new`와 함께 호출된다.

- `new`로 함수를 호출하면 자바스크립트 엔진이 내부적으로 빈 객체를 생성하고, 그 객체를 this에 바인딩한다.

- 생성자 함수 내부에서 this는 새로 만들어질 인스턴스를 가리키며, 여기에 프로퍼티를 정의하면 인스턴스에 귀속된다.

### 핵심내용 2

- 자바스크립트에서 함수는 일반 함수와 생성자 함수의 문법적 구분이 없다.

- 함수의 역할은 선언 시점이 아니라 호출 방식(`new` 여부)에 따라 결정된다.

- `new` 없이 생성자 함수를 호출하면 this는 전역 객체(Window 또는 global)를 가리키게 되어 의도치 않은 전역 변수 생성이 발생할 수 있다.

### 핵심내용 3

- 생성자 함수로 만들어진 인스턴스는 생성자의 prototype을 참조한다.

- new 호출 시 내부적으로 `[[Prototype]]`이 생성자 함수의 prototype과 연결된다.

- 공통 메서드는 prototype에 정의하고, 인스턴스 고유 값만 this에 할당하는 구조가 가능해진다.

## Check Point

- 생성자 함수는 반드시 new와 함께 호출했는지
- this가 인스턴스를 가리키고 있는지 전역 객체를 가리키고 있는지 구분 가능한지

## 언제 문제가 되는가 / 언제 쓰는가

- **실무**: new를 빼먹은 생성자 호출로 전역 객체에 값이 붙는 치명적인 버그가 발생할 수 있음.
- **React**: 클래스 컴포넌트에서 constructor와 this 바인딩 개념을 이해하는 데 직접적인 기초가 된다.

## 정리

> - 생성자 함수에서 this는 항상 _“지금 막 만들어지고 있는 인스턴스 자신”_
