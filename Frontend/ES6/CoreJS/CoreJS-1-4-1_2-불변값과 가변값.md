# [Core JS] 1-4. 불변값과 가변값

## 요약

자바스크립트에서 불변성과 가변성은 변수의 속성이 아니라 메모리에 저장된 데이터의 성질이다.  
기본형 데이터는 한 번 생성되면 수정할 수 없어 변경 시 항상 새로운 값이 만들어지고,  
참조형 데이터는 객체 내부의 참조 관계가 변경될 수 있어 가변적으로 동작한다.  
모든 변화는 값의 수정이 아니라 참조 대상의 재연결로 이루어진다.

## 핵심 내용

### 1. 불변값(Immutable Value)의 본질

- 자바스크립트에서 불변성은 **변수의 성질이 아니라 데이터 영역에 저장된 값의 성질**이다.
- 기본형 데이터(number, string, boolean, null, undefined, Symbol)는 모두 불변값이다.
- 한 번 생성된 기본형 값은 **자체를 수정할 수 없으며**, 변경은 항상 새로운 값을 만드는 방식으로 이루어진다.

```js
let a = 'abc';
a = a + 'def';
```

- 기존의 `'abc'` 문자열이 수정되는 것이 아니다.
- `'abcdef'`라는 **새로운 문자열**이 데이터 영역에 생성된다.
- 변수 `a`는 기존 주소가 아닌 **새로운 데이터 주소를 참조**하게 된다.

즉, 기본형 데이터에서의 “변경”이란

> 값의 변경이 아니라 **변수가 참조하는 대상의 변경**이다.

또한,

```js
let b = 5;
let c = 5;
```

- 데이터 영역에 `5`라는 값이 이미 존재한다면,
- 엔진은 해당 값을 재사용할 수 있다.
  > CoreJS 교재에서는 이렇게 설명하고 있다.
- 이 재사용 여부는 엔진 최적화 영역이며, **개발자는 이를 관찰하거나 구분할 수 없다.**
  > 이전에 찾아본 내용

중요한 점은,

### 2. 가변값(Mutable Value)의 구조적 이유

참조형 데이터(object, array, function)는  
값 자체가 아니라 **값의 묶음을 가리키는 주소**를 변수에 저장한다.

```js
let obj = {
  a: 1,
  b: 'bbb',
};
```

이때 메모리 구조는 다음과 같다.

- 변수 영역: `obj → 객체의 주소`
- 데이터 영역: 객체 데이터 (또 다른 변수 영역)
- 객체 내부: 프로퍼티별로 다시 주소를 저장

이 구조로 인해,

```js
obj.a = 2;
```

- 새로운 객체가 생성되지 않는다.
- 기존 객체 내부의 `a` 프로퍼티가
  - 새로운 값의 주소를 참조하도록 변경된다.
- 변수 `obj`가 가리키는 객체 주소는 **변하지 않는다.**

따라서 참조형 데이터의 가변성이란,

> 객체 자체가 바뀌는 것이 아니라  
> **객체 내부에서 참조 관계가 변경될 수 있다는 의미**다.

또한,

```js
obj.arr = 'str';
```

- 기존 배열이 더 이상 어떤 변수에서도 참조되지 않으면
- 해당 데이터는 **가비지 컬렉션(GC) 대상**이 된다.
- 참조형 데이터는 참조 카운트(또는 도달 가능성)에 의해 생존 여부가 결정된다.

---

## Check Point

- 자바스크립트 가비지 컬렉터 GC의 동작 방식, 원칙

---

## 언제 문제가 되는가 / 언제 쓰는가

- 객체를 복사했다고 생각했는데 원본이 함께 변경될 때
- 얕은 복사 / 깊은 복사의 차이를 이해하지 못할 때
- React state를 직접 수정하여 리렌더링이 발생하지 않을 때
- 문자열이나 숫자를 “수정”한다고 착각할 때

---

## 정리

- 기본형 데이터는 **불변값**이며, 변경 시 항상 새 값이 생성된다.
- 참조형 데이터는 **가변값**이며, 객체 내부의 참조 관계는 변경될 수 있다.
- 자바스크립트의 모든 동작은  
  **값이 아니라 주소의 연결과 재연결**로 이해해야 정확하다.
