# [Core JS] 3-1-2. 메서드로서 호출할 때 그 메서드 내부에서의 this

## 요약

- **메서드 호출에서 this는 “호출한 객체(점 앞의 객체)”로 결정.**
- 그래서 _함수를 어디에 **정의**했는지_ 가 아니라 _어떻게 **호출** 했는지_ 를 보면 this 버그를 빠르게 잡을 수 있음.

## 핵심 내용

### 핵심내용 1) 메서드 vs 함수는 “정의”가 아니라 “호출 형태”로 갈린다

- **개념**: 어떤 함수를 객체의 프로퍼티에 넣어도, 그 자체로 무조건 메서드가 되는 건 아닙니다.
  - `func(1)` 처럼 **점(.) 없이 호출**하면 “함수 호출”
  - `obj.method(1)` 처럼 **점(.)이 붙어 호출**하면 “메서드 호출”
- **원인**: 자바스크립트는 호출 시점에 `this`를 채우는 언어이고, 호출 문법이 “누가 호출 주체인가”를 드러냅니다.
- **결과**: 같은 함수라도 호출 형태가 달라지면 this가 달라집니다.

```js
var func = function (x) {
  console.log(this, x);
};

func(1); // 함수 호출: this -> 전역 객체(브라우저: window) 또는 undefined(strict)

var obj = { method: func };
obj.method(2); // 메서드 호출: this -> obj
```

### 핵심내용 2) 메서드 호출에서 this는 “마지막 점 앞의 객체”다

- **개념**: 메서드 호출에서 `this`는 호출한 객체, 즉 **마지막 `.` 앞에 있는 값**을 가리킵니다.
- **원인**: `obj.inner.method()` 같은 체인 호출은 결국 “어떤 객체의 프로퍼티로서 함수가 호출됐는가”로 결정됩니다.
- **결과**: 중첩 객체/체이닝에서도 규칙이 단순해집니다. **마지막 점 앞만 보면 됩니다.**

```js
var obj = {
  methodA: function () {
    console.log(this);
  },
  inner: {
    methodB: function () {
      console.log(this);
    },
  },
};

obj.methodA(); // this -> obj
obj.inner.methodB(); // this -> obj.inner
```

### 핵심내용 3) 대괄호 표기법도 “점 표기법”과 동일하게 동작한다

- **개념**: `obj['method']()`는 `obj.method()`와 동일한 “메서드 호출”입니다.
- **원인**: 둘 다 “obj의 프로퍼티로 꺼낸 함수를 obj를 주체로 호출”한다는 구조가 같습니다.
- **결과**: 프로퍼티 접근 방식이 달라도 this 규칙은 유지됩니다.

```js
obj['methodA'](); // this -> obj
obj['inner']['methodB'](); // this -> obj.inner
```

### 핵심내용 4) “참조를 떼어내면” 메서드가 함수로 바뀌며 this가 흔들린다

- **개념**: 메서드를 변수에 담아 “점 없이” 호출하면 그 순간부터 함수 호출이 됩니다.
- **원인**: 호출 표현식에서 더 이상 “호출 주체(점 앞 객체)”가 사라지기 때문입니다.
- **결과**: React/이벤트/콜백에서 자주 보는 `this` 버그의 핵심 원인입니다.

```js
var f = obj.methodA;
f(); // 함수 호출: this -> 전역 객체 또는 undefined(strict)
```

## Check Point

- “메서드냐 함수냐”를 **정의 위치/이름**으로 판단하지 않고, **호출 형태(점이 있나?)**로 판단
  > 함수의 독립성 판단

## 언제 문제가 되는가 / 언제 쓰는가

- **React/실무 디버깅 포인트**: 클래스 컴포넌트나 객체 메서드를 이벤트 핸들러/콜백으로 전달할 때 this가 깨진다.
  - 예: `onClick={obj.methodA}` 처럼 **메서드 참조만 넘기면**, 실제 호출은 React가 해버려 “점 앞 객체”가 사라진다.
  - 해결 방향: `bind`, 래핑 함수 `() => obj.methodA()`, 혹은 아예 `this` 의존을 없애고 필요한 값만 인자로 전달(함수형 스타일)한다.
- **디버깅 습관**: 콘솔에 `this`를 찍기 전에, 먼저 호출부를 보고 “점이 있나/마지막 점 앞이 무엇인가”를 판정하면 훨씬 빠르다. `TIP!`

## 정리

- **this는 ‘정의’가 아니라 ‘호출’이 정한다 — 점(.) 앞의 객체가 곧 this다.**
