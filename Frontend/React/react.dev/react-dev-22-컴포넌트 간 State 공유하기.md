# React.dev-docs-22-컴포넌트 간 State 공유하기

[REACT 학습하기 > STATE 관리하기 > 컴포넌트 간 State 공유하기](https://ko.react.dev/learn/sharing-state-between-components)

## Goal

두 컴포넌트의 state가 항상 함께 변경되기를 원할 때.  
각 컴포넌트에서 state를 제거하고 가장 가까운 공통 부모 컴포넌트로 옮긴 후 props로 전달할 것.  
State 끌어올리기

- State 끌어올리기를 통해 컴포넌트 간 state를 공유하는 방법
- 제어 컴포넌트와 비제어 컴포넌트

## State 끌어올리기 예시

### Step 1: 자식 컴포넌트에서 state 제거하기

- 각 자식 컴포넌트가 독립적으로 state를 관리하면 **동기화 문제**가 발생할 수 있다.
- 이를 해결하기 위해 자식의 state를 제거하고 props만 받도록 단순화한다.

### Step 2: 하드 코딩된 데이터를 부모 컴포넌트로 전달하기

- 자식에서 사용하던 초기 데이터(예: 입력값)를 부모 컴포넌트의 props로 전달한다.
- 부모 → 자식 방향의 단방향 데이터 흐름을 만든다.

### Step 3: 공통 부모에 state 추가하기

- 두 자식이 공유해야 하는 state를 부모에 정의한다.
- 부모는 state와 state 변경 함수를 자식에게 props로 전달한다.
- 자식이 변경을 요청하면 부모의 state가 바뀌고, 이는 다시 props를 통해 자식에게 반영된다.

## 각 state의 단일 진리의 원천

- React에서 state를 여러 곳에 중복 저장하면 동기화 문제가 발생한다.
- 따라서 **한 곳에서만 state를 관리하고(props로 전달)**, 나머지는 이를 참조하는 방식으로 구성해야 한다.
- 이 원칙을 **Single Source of Truth(단일 진리의 원천)** 이라 한다.

## 요약

- 두 컴포넌트를 조정하고 싶을 때 **state를 공통 부모로 이동**한다.
- 공통 부모에서 **props로 데이터를 전달**하고, **이벤트 핸들러를 내려서 자식이 부모 state를 변경**할 수 있도록 한다.
- 컴포넌트를 (props로부터) “제어”할지 (state로부터) “비제어”할지 고민하며 설계하는 것이 중요하다.

## 인사이트

- **State 끌어올리기**는 React에서 “단일 진리의 원천” 개념을 가장 잘 보여주는 패턴이다.
  - 이 원칙 덕분에 state 관리가 단순해지고, 버그 가능성이 크게 줄어든다.
- 하지만 state가 지나치게 상위로 끌어올려지면 “prop drilling” 문제로 이어질 수 있으며, 이때는 **Context**나 **상태 관리 라이브러리(Redux, Zustand 등)** 를 고려해야 한다. 이를 위해 탄생한 소중하고 유용한 hook과 library들.
