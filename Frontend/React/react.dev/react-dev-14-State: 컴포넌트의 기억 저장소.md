# React.dev-docs-14-State: 컴포넌트의 기억 저장소

[REACT 학습하기 > 상호작용성 더하기 > State: 컴포넌트의 기억 저장소](https://ko.react.dev/learn/state-a-components-memory)

## Goal

컴포넌트는 현재 입력값, 현재 이미지, 장바구니와 같은 것들을 “기억”해야 한다.  
React는 이런 종류의 컴포넌트별 메모리를 state라고 부른다.

- [`useState`](https://ko.react.dev/reference/react/useState) 훅으로 state 변수를 추가하는 방법
- `useState` 훅이 반환하는 한 쌍의 값
- 둘 이상의 `state` 변수를 추가하는 방법
- `state`를 지역적이라고 하는 이유

## 일반 변수로 충분하지 않은 경우

- 일반 지역 변수는 **렌더링이 다시 일어나면 초기화**된다.
- 따라서 사용자의 입력값이나 UI의 현재 상태를 “기억”할 수 없다.
- React는 이를 해결하기 위해 `state`를 제공한다.
- 지역 변수를 변경해도 렌더링을 일으키지 않는다.

## state 변수 추가하기

```jsx
import { useState } from 'react';
const [index, setIndex] = useState(0);
```

### 첫 번째 훅 만나기

- `useState`는 React에서 제공하는 **훅(hook)** 이다.
- 호출 시 `[state, setState]` 한 쌍의 값을 반환한다.

> **주의하세요!**
>
> 훅(use로 시작하는 함수들)은 컴포넌트의 최상위 수준 또는 커스텀 훅에서만 호출할 수 있다.
>
> 조건문, 반복문 또는 기타 중첩 함수 내부에서는 훅을 호출할 수 없다.
>
> 훅은 함수이지만 컴포넌트의 필요에 대한 무조건적인 선언으로 생각.
>
> 파일 상단에서 모듈을 “import”하는 것과 유사하게 컴포넌트 상단에서 React 기능을 “사용" 할 수 있다.

### `useState` 해부하기

- `const [index, setIndex] = useState(0)`
  - `index`: 현재 state 값
  - `setIndex`: state를 업데이트하는 함수
- `setIndex(newValue)`를 호출하면 컴포넌트가 다시 렌더링되고, 새로운 state 값이 반영된다.

> **중요합니다!**
>
> 이 쌍의 이름은 `const [something, setSomething]`과 같이 지정하는 것이 규칙이다.
>
> 원하는 대로 이름을 지을 수 있지만, 규칙을 사용하면 프로젝트 전반에 걸쳐 상황을 더 쉽게 이해할 수 있다.

## 컴포넌트에 여러 state 변수 지정하기

- 하나의 컴포넌트에서 `useState`를 여러 번 호출할 수 있다.
- 예: `const [name, setName] = useState('Taylor')` + `const [age, setAge] = useState(20)`
- 각각 독립적으로 관리되며 필요에 따라 나누어 사용하는 것이 권장된다.

### React는 어떤 state를 반환할지 어떻게 알 수 있을까요?

- React는 **훅의 호출 순서**를 기준으로 state를 매핑한다.
- 즉, 컴포넌트가 매번 같은 순서로 `useState`를 호출해야 한다.
- 조건문, 반복문 내부에서 훅을 호출하지 않는 이유가 여기에 있다.

## State는 격리되고 비공개로 유지됩니다

- State는 각 컴포넌트 **인스턴스에 독립적으로 존재**한다.
- 동일한 컴포넌트를 두 번 렌더링하면 각각 별도의 state를 가진다.
- 외부에서 직접 접근할 수 없으며, 해당 컴포넌트 내부에서만 사용 가능하다.
- 즉, `Props`와 달리, `state`는 선언한 컴포넌트에 완전히 비공개이다.

## 요약

- 컴포넌트가 렌더링 간에 어떤 정보를 “기억”해야 할 때 state 변수를 사용한다.
- state 변수는 `useState` 훅을 호출하여 선언한다.
- 훅은 `use`로 시작하는 특별한 함수들로, state와 같은 React 기능에 연결할 수 있다.
- `useState`는 현재 state와 이를 업데이트할 함수로 이루어진 한 쌍을 반환한다.
- 여러 개의 state 변수를 가질 수 있으며, React는 **_호출 순서_** 로 구분한다.
- state는 컴포넌트에 비공개이며, 각 인스턴스는 독립적인 state를 가진다.
  - 곳에서 렌더링하더라도 각각의 복사본은 고유한 state를 가진다.

## 인사이트

- “훅은 항상 같은 순서로 호출해야 한다”는 규칙을 다시금 이해하게 되었음. -> React 내부 구현의 중요한 특징.
  - > 훅이 호출 순서를 통해 react에서 매칭하고 구분한다는 사살은 몰랐던 사실!
- 동일한 컴포넌트를 여러 번 렌더링할 경우 각각 고유한 state를 가지는 것을 통해 **컴포넌트의 독립성** 이 느껴짐.
