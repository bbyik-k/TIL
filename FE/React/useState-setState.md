# React `useState`의 `setState` 사용 방식 비교

## 두 가지 방식

React에서 `useState`의 `setState`를 사용할 때, 아래 두 가지 방식 중 상황에 따라 적합한 것을 선택해야 합니다:

1. **외부 값 참조**

   ```javascript
   setCount(count + 1);
   ```

   - 현재 컴포넌트에서 **외부 변수**(`count`)를 참조하여 상태를 업데이트합니다.
   - 코드 실행 시점에 해당 컴포넌트가 참조하고 있는 상태 값을 사용합니다.

2. **이전 값 참조**
   ```javascript
   setCount((prev) => prev + 1);
   ```
   - React가 제공하는 **이전 상태 값**(`prev`)을 기반으로 상태를 업데이트합니다.
   - React가 최신 상태를 보장하므로, 비동기 업데이트에서도 안전하게 작동합니다.

---

## 언제 어떤 방식을 사용할까?

### `setCount(count + 1)`을 사용하는 경우

- 상태가 단순히 한 번만 변경되며, 비동기 로직이 없는 경우 적합합니다.
- 상태가 외부에서 이미 업데이트된 최신 값을 참조한다고 확신할 수 있을 때.

#### 예시

```javascript
const [count, setCount] = useState(0);

// 상태를 단순히 1 증가시키는 경우
const increment = () => {
  setCount(count + 1);
};
```

---

### `setCount(prev => prev + 1)`을 사용하는 경우

- **비동기 로직**이 포함된 상황이거나 상태를 여러 번 연속적으로 변경해야 할 때.
- 현재 렌더링 시점의 상태 값이 아니라 **가장 최신 상태 값**을 기반으로 업데이트해야 할 때.

#### 예시

```javascript
const [count, setCount] = useState(0);

// 상태를 여러 번 연속적으로 변경하는 경우
const incrementMultiple = () => {
  setCount((prev) => prev + 1);
  setCount((prev) => prev + 1); // 누적적으로 2 증가
};
```

---

## 두 방식의 비교

| **특징**                   | `setCount(count + 1)`                      | `setCount(prev => prev + 1)`   |
| -------------------------- | ------------------------------------------ | ------------------------------ |
| **현재 값 기반**           | 현재 컴포넌트에서 참조 가능한 상태 값 사용 | 최신 상태 값을 보장            |
| **상태 업데이트의 안전성** | 비동기 업데이트에서 부정확할 가능성 있음   | 항상 최신 상태를 기반으로 작동 |
| **연속적인 업데이트**      | 잘못된 값으로 누적될 가능성 있음           | 누적 업데이트에서 안전         |
| **비동기 상황에서의 동작** | 예기치 않은 결과를 초래할 수 있음          | 안정적으로 동작                |
| **코드 가독성**            | 간단함                                     | 약간 더 복잡                   |

---

## 결론

**권장 방식**: **`setCount(prev => prev + 1)`**

- 비동기 상태 업데이트 및 최신 상태 보장이 필요하므로, 이전 상태 값을 사용하는 방식이 더 안전하고 일반적으로 추천됩니다.

### **실제 개발 팁**

- 단순한 상태 변경에는 `setCount(count + 1)`을 사용해도 문제가 없지만, **비동기 로직이나 상태 누적 업데이트**가 포함된 경우에는 반드시 `prev`를 사용하는 방식으로 작성하세요.
